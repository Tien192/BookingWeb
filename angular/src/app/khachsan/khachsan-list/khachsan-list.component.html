<div class="container">
  <div class="row">
    <div class="col-lg-3">
      <!-- Form sắp xếp -->
      <div class="SapXep">
        <form
          class="card flex flex-column gap-4 FormSapXep"
          [formGroup]="formSapXep"
        >
          <p style="font-size: 18px; font-weight: 700">Sắp xếp kết quả</p>
          <hr style="margin: 0" />
          <div *ngFor="let sapxep of sapxeps" class="field-checkbox">
            <p-radioButton
              [inputId]="sapxep.key"
              [value]="sapxep"
              formControlName="selectedCategory"
            ></p-radioButton>
            <label [for]="sapxep.key" class="ml-2">{{ sapxep.name }}</label>
          </div>
        </form>
      </div>
      <!-- End form sắp xếp -->
      <!-- Form lọc -->
      <div class="card Loc">
        <form class="FormLoc" [formGroup]="formLoc" (ngSubmit)="onSubmit()">
          <p style="font-size: 18px; font-weight: 700">Lọc kết quả</p>
          <hr />
          <!-- Miễn phí hủy phòng -->
          <div class="MienPhiHuyPhong">
            <p>Chính sách đặt phòng</p>
            <div class="CheckboxMienPhiHuyPhong">
              <p-checkbox
                formControlName="mienphihuyphong"
                value="true"
                inputId="fc"
              ></p-checkbox>
              <label for="fc">Miễn phí hủy phòng</label>
            </div>
          </div>
          <hr style="margin: 21px 0" />
          <!-- End miễn phí hủy phòng -->
          <!-- Khoảng giá phòng cần tìm -->
          <div class="MoneyRange">
            <p>Khoảng giá phòng mỗi đêm</p>
            <div class="MoneyRangeInput flex w-full">
              <input
                class="col-lg-4"
                type="number"
                pInputText
                placeholder="Giá bé nhất"
                formControlName="inputminprice"
                [ngModel]="rangeValues[0]"
              />
              <hr class="col-lg-2" style="border: 1px solid; margin: 5% 0" />
              <input
                class="col-lg-4"
                type="number"
                pInputText
                placeholder="Giá lớn nhất"
                formControlName="inputmaxprice"
                [ngModel]="rangeValues[1]"
              />
            </div>
            <p-slider
              class="w-full"
              formControlName="inputprice"
              [ngModel]="rangeValues"
              [range]="true"
              [min]="0"
              [max]="maxPrice"
            ></p-slider>
          </div>
          <!-- End khoảng giá phòng cần tìm -->
          <hr />
          <!-- Số sao khách sạn cần tìm -->
          <div formGroupName="LocSaoData" class="CheckboxLocSao">
            <p>Hạng sao</p>
            <div class="CheckboxLocSaoItem" *ngFor="let star of stars">
              <p-checkbox
                formControlName="value{{ star }}"
                [value]="star"
              ></p-checkbox>
              <p-rating
                [readonly]="true"
                [cancel]="false"
                formControlName="numberStar{{ star }}"
              ></p-rating>
            </div>
          </div>
          <!-- End số sao khách sạn cần tìm -->
          <!-- Loại hình cư trú -->
          <div formGroupName="LocLoaiHinhCuTru" class="CheckboxLoaiHinhCuTru">
            <p>Loại hình cư trú</p>
            <ul class="LocLoaiHinhCuChuItem">
              <li>
                <p-checkbox
                  formControlName="khachsan"
                  value="1"
                  inputId="ks"
                ></p-checkbox>
                <label for="ks">Khách Sạn</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="khachsancaocap"
                  value="2"
                  inputId="kscc"
                ></p-checkbox>
                <label for="kscc">Khách Sạn Cao Cấp</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="homestay"
                  value="3"
                  inputId="hs"
                ></p-checkbox>
                <label for="hs">HomeStay</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="nhanghi"
                  value="4"
                  inputId="nn"
                ></p-checkbox>
                <label for="nn">Nhà Nghỉ</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="resort"
                  value="5"
                  inputId="rs"
                ></p-checkbox>
                <label for="rs">Resort</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="canho"
                  value="6"
                  inputId="ch"
                ></p-checkbox>
                <label for="ch">Căn Hộ</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="chonghi"
                  value="7"
                  inputId="cn"
                ></p-checkbox>
                <label for="cn">Chỗ nghỉ</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="nhadan"
                  value="8"
                  inputId="nd"
                ></p-checkbox>
                <label for="nd">Nhà dân</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="nhatro"
                  value="9"
                  inputId="nt"
                ></p-checkbox>
                <label for="nt">Nhà Trọ</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="bietthu"
                  value="10"
                  inputId="bt"
                ></p-checkbox>
                <label for="bt">Biệt thự</label>
              </li>
              <li>
                <p-checkbox
                  formControlName="studio"
                  value="11"
                  inputId="sd"
                ></p-checkbox>
                <label for="sd">Studio</label>
              </li>
            </ul>
          </div>
          <!-- End loại hình cư trú -->

          <p-button
            type="submit"
            [disabled]="!formLoc.valid"
            label="Lọc"
          ></p-button>
        </form>
      </div>
      <!-- End form lọc -->
    </div>

    <div class="col-lg-8">
      <p-table
        [value]="listkhachsan"
        [rows]="5"
        [paginator]="true"
        [pageLinks]="3"
        (onPage)="onPageChange($event)"
      >
        <ng-template pTemplate="body" let-item let-i="rowIndex">
          <!-- Table body rows here -->

          <tr
            [routerLink]="['/app/khachsanstart', item?.phongId]"
            style="cursor: pointer"
          >
            <!-- Image -->
            <td>
              <div
                class="slide-image"
                [ngStyle]="{
                  'background-image': getCurrentSlideUrl(
                    (currentIndex + i) % listkhachsan.length
                  )
                }"
                tabindex="0"
              ></div>
            </td>
            <!-- Details -->
            <td>
              <!-- Content of "Ten Loai Don Vi" -->
              <p style="font-weight: 700">
                {{
                  listkhachsan[(currentIndex + i) % listkhachsan.length]
                    ?.hinhThucPhong
                }}-{{
                  listkhachsan[(currentIndex + i) % listkhachsan.length]
                    ?.tenDonVi
                }}
              </p>
              <!-- Content of "Dia Diem" -->
              <div class="DiaDiem" style="width: fit-content; margin: 10px 0">
                <div style="display: flex; padding-bottom: 3px">
                  <p class="HinhThucPhongTitle">
                    {{
                      listkhachsan[(currentIndex + i) % listkhachsan.length]
                        ?.hinhThucPhong
                    }}
                  </p>
                  <p-rating
                    [iconOnStyle]="{ color: '#FFD200', fontSize: '15px' }"
                    [ngModel]="
                      listkhachsan[(currentIndex + i) % listkhachsan.length]
                        ?.danhGiaSaoTb
                    "
                    [readonly]="true"
                    [cancel]="false"
                  ></p-rating>
                </div>
                <i class="pi pi-map-marker"></i>
                {{
                  listkhachsan[(currentIndex + i) % listkhachsan.length]
                    ?.tenDiaDiem
                }}
              </div>
              <!-- Content of "Danh Gia Phong" -->
              <div class="DanhGiaPhong">
                <p>Điểm đánh giá</p>
                <h6>
                  {{
                    listkhachsan[(currentIndex + i) % listkhachsan.length]
                      ?.diemDanhGiaTB
                  }}/10
                </h6>
              </div>
            </td>
            <!-- Content of "Gia Phong" -->
            <td>
              <div class="GiaPhong">
                <p>Thanh toán khi nhận phòng</p>
                <h6 style="color: red">
                  VNĐ:{{
                    listkhachsan[(currentIndex + i) % listkhachsan.length]
                      ?.listLoaiPhong[0].giaPhongTheoDem
                  }}
                </h6>
                <p>Giá cuối cùng</p>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
